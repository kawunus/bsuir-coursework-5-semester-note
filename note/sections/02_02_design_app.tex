\subsection{Проектирование приложения}

Приложение построено по клиент-серверной архитектуре, где функциональные обязанности разделены между двумя основными компонентами: клиентской и серверной частями. Клиентская часть представляет собой пользовательский интерфейс, который обеспечивает взаимодействие пользователя с системой, в то время как серверная часть  отвечает за обработку запросов, выполнение бизнес-логики и управление данными приложения.

Клиентская часть собирает запросы пользователя (клиента, тренера или администратора) и передает их на сервер через сеть. Серверная часть, реализованная с использованием шаблона \textit{Entity}-\textit{Boundary}-\textit{Control}, обрабатывает эти запросы с помощью \textit{сontrol}-объектов, выполняет необходимые операции с данными в системе управления базами данных (СУБД) через \textit{entity}-объекты и отправляет результаты обратно на клиентскую сторону. Вся коммуникация между клиентом и сервером осуществляется с помощью протокола \textit{HTTP}, что обеспечивает стандартное и надежное взаимодействие.

Дополнительно, серверная часть, включающая \textit{control}-объекты для реализации бизнес-логики, может включать элементы кэширования для повышения производительности и быстродействия приложения. Также обязательна реализация механизмов аутентификации и авторизации по ролям для контроля доступа, что повышает безопасность системы. В процессе взаимодействия могут использоваться различные методы оптимизации, такие как сжатие данных или асинхронная обработка запросов, что способствует более эффективной работе с большим объемом информации, например, при загрузке полного расписания или аналитических отчетов.

\subsubsection{} Диаграмма вариантов использования

Диаграммы вариантов использования служат для отображения взаимосвязей между группами вариантов использования и участниками, которые принимают участие в процессе. Эти диаграммы помогают наглядно представить, как различные элементы системы взаимодействуют между собой, а также показывают, какие действия выполняются в рамках каждого варианта использования.

Основные элементы диаграммы включают участников и варианты использования. Участник – это роль или набор ролей, выполняемых субъектом при взаимодействии с системой или её компонентами (например, с подсистемами или классами). Участником может быть как человек, так и другая система, подсистема или класс, которые представляют внешние объекты или субъекты по отношению к сущности системы.

Вариант использования представляет собой описание группы действий, выполняемых в системе с точки зрения участника, и направленных на достижение определённого результата. Эти варианты описывают типичные взаимодействия между пользователем и системой, а также отображают внешний интерфейс системы. Они отвечают на вопрос, что система должна сделать, а не как это должно быть реализовано.

Диаграмма вариантов использования может включать дополнительные элементы, такие как системные границы, комментарии и атрибуты для вариантов использования. Также на диаграмме могут быть указаны различные типы связей, например, связь между участником и вариантом использования, которая демонстрирует, какие функции бизнес-системы могут быть использованы субъектом. 

Ассоциация – это связь между двумя элементами модели, например, между участником и вариантом использования. Она описывает причину связи и управляющие ею правила. Ассоциация указывает на то, что участник может использовать определённые функциональные возможности системы.

Отношение обобщения – это связь, в которой один элемент модели (дочерний) основан на другом (родительском). В контексте диаграмм вариантов использования отношение обобщения означает, что дочерний элемент наследует все атрибуты, операции и отношения родительского элемента. Это позволяет моделировать общие и частные варианты использования.

Отношение включения – это связь, в которой один вариант использования (базовый) включает в себя функциональные возможности другого варианта использования (вариант использования включения). Это отношение способствует повторному использованию функциональности, предотвращая дублирование описания схожих действий.

Отношение расширения – указывает на то, что один вариант использования (расширение) добавляет дополнительные действия или поведение к другому варианту использования (базовому). Это помогает раскрыть детали о системе, которые обычно скрыты в базовом варианте использования, расширяя функциональные возможности системы.

В АИС студии 3\textit{D}-печати \textit{KawunPrint} можно выделить следующие действующие лица: неавторизованный пользователь, клиент, сотрудник, аналитик и администратор.

Исходя из потребностей действующих лиц, выделяются следующие варианты использования:
\begin{itemize}
    \item авторизоваться в системе;
    \item зарегистрироваться;
    \item ввести или обновить личные данные в профиле;
    \item подтвердить \textit{Email} с помощью проверочного кода;
    \item выйти из системы;
    \item создать заказ на 3D-печать;
    \item загрузить файлы 3D-моделей (интеграция с \textit{Firebase Storage});
    \item просмотреть список и историю своих заказов;
    \item просмотреть детализацию изменений статусов заказа;
    \item просмотреть список всех заказов (для сотрудника и аналитика);
    \item изменить статус заказа (например, перевести в «Печать» или «Готов»);
    \item списать расходные материалы (\textit{Filament}) под конкретный заказ;
    \item добавить или удалить тип пластика;
    \item управление запасами филамента (добавление катушек, учет остатков);
    \item управление парком принтеров (добавление, редактирование, списание);
    \item изменить статус активности принтера (включен/выключен);
    \item вести журнал истории обслуживания принтеров;
    \item просмотреть список всех зарегистрированных пользователей;
    \item назначить роль пользователю (\textit{Admin}, \textit{Employee}, \textit{Analyst});
    \item просмотреть финансовую статистику и отчеты;
    \item просмотреть статистику загрузки файлов и использования дискового пространства;
    \item прямое администрирование файлов в облачном хранилище;
    \item удалить пользователя или ошибочные данные из БД.
\end{itemize}

Диаграмма вариантов использования АИС студии 3\textit{D}-печати \textit{KawunPrint} представлена на рисунке \ref{fig:usecase}.

\begin{figure}[H]
    \centering
    \includegraphics[width=0.5\textwidth]{attachments/usecade_diagram.png}
    \caption{Диаграмма вариантов использования АИС студии 3D-печати \textit{KawunPrint}}
    \label{fig:usecase}
\end{figure}

На диаграмме вариантов использования для базы студии \textit{3D}-печати показано взаимодействие между вариантами использования и действующими лицами. Диаграмма отражает требования к системе, демонстрируя, какие действия должны выполняться различными пользователями для эффективного взаимодействия с базой данных студии.

Для каждого действующего лица выделяются определённые варианты использования, в зависимости от их потребностей и ролей в системе. Например, неавторизированный пользователь может зарегистрироваться или авторизоваться, в то время как авторизированный пользователь имеет доступ к просмотру и изменению  личных данных, созданию заказов и их просмотру. Сотрудники и аналитики имеют расширенные возможности, такие как управление заказами, списание материалов и просмотр статистики. Администраторы обладают полным доступом к управлению пользователями и данными системы.

Эта диаграмма служит ключевым инструментом для проектирования базы данных, чётко структурируя все требования к системе и показывая, какие функции должны быть доступны различным ролям в системе.

\subsubsection{} Схемы алгоритмов

Схемы алгоритмов, или блок-схемы, представляют собой графическое отображение алгоритмов или процессов, где каждый шаг или операция алгоритма изображены в виде блоков, а связи между ними отображены стрелками. Эти схемы позволяют наглядно представить последовательность действий, которые должны быть выполнены для достижения поставленной цели. 

Алгоритм авторизации (\textit{/api/v1/login}) начинается с получения данных, содержащих \textit{email} и пароль, в виде объекта \textit{LoginRequest}.

Если данные (\textit{LoginRequest}) не получены или не распознаны корректно, алгоритм выводит ошибку (400 \textit{Bad Request}) и завершается.

Если данные получены верно, система формирует запрос на проверку существования пользователя по его \textit{email} в таблице \textit{Users}.

Если результат запроса отрицательный (пользователь не найден), то система выводит соответствующую ошибку (400: Неверный \textit{Email}), и алгоритм заканчивается.

Если же результат положительный (пользователь найден), то система инициирует проверку совпадения хешей паролей.

После этого проверяется, совпали ли хеши.

Если нет, то система выводит ошибку (400: Неверный Пароль), и процесс завершается.

Если да, то система генерирует авторизационный \textit{JWT} токен.

После этого проверяется, завершены ли все операции успешно (в рамках \textit{try}-\textit{catch} блока).

Если да, то выводится сообщение от системы об успешной авторизации (\textit{200 OK}) с возвратом токена.

После этого процесс завершается.

Алгоритм авторизации представлен на рисунке \ref{fig:auth_algorithm}.

\begin{figure}[H]
    \centering
    \includegraphics[width=0.4\textwidth]{attachments/auth_algorithm.png}
    \caption{Алгоритм авторизации в системе}
    \label{fig:auth_algorithm}
\end{figure}

Алгоритм был сделан таким образом, чтобы подходить сразу и для администраторской части веб-преложения, и для клиентской части веб-приложения
