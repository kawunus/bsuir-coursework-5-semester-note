\section{Проектирование АИС студии 3\textit{D}-печати}

\subsection{Проектирование базы данных}

Проектирование базы данных является ключевым элементом эффективного управления и анализа больших объемов информации в современных организациях. Для представления структуры базы данных используется \textit{ER}-диаграмма, выполненная в нотации Питера Чена, а также логическая схема базы данных, реализованная с применением нотации \textit{IDEF1X} для четкого отображения ключей. Этот подход основывается на \textit{ER}-модели, которая представляет графическую нотацию для описания ключевых элементов базы данных, таких как сущности, их атрибуты и связи между ними. \textit{ER}-диаграмма в нотации Питера Чена представлена в графическом приложении А к курсовому проекту.

Процесс проектирования базы данных регулируется определёнными принципами, которые обеспечивают эффективность и согласованность информации. Первый принцип – это предотвращение избыточности данных. Повторяющиеся и ненужные данные занимают пространство, увеличивая вероятность ошибок и неточностей, что может снизить эффективность работы системы и усложнить её обслуживание.

Второй принцип – точность и полнота данных. Ошибки или неполные данные могут исказить результаты анализа расхода материалов или истории заказов и повлиять на принятие ключевых управленческих решений. Поэтому важно стремиться к точности и полноте данных для обеспечения надёжного и достоверного анализа деятельности студии.

Проектирование базы данных (БД) – это многогранный процесс, охватывающий несколько важных этапов, направленных на создание структурированной, эффективной и надёжной системы управления данными. На первом этапе проводится тщательный анализ требований, включая изучение нужд пользователей (клиентов, сотрудников, аналитиков, администраторов) и бизнес-процессов, определение типов данных и функциональных требований.

Один из ключевых этапов – нормализация данных, цель которой – устранение избыточности, минимизация аномалий и структурирование данных. На этом этапе данные разбиваются на более мелкие таблицы и устраняются повторяющиеся записи.

Выбор модели данных – ещё один важный момент, который предполагает определение наиболее подходящей модели для проекта. В данном случае выбрана реляционная модель. Затем на следующем этапе устанавливаются ключевые поля и связи между ними, такие как неидентифицирующие связи 1:M и связи 1:1, чтобы обеспечить целостность данных и оптимизировать работу с запросами.

Оптимизация производительности также играет важную роль в проектировании базы данных. Она включает в себя работу над структурой данных, индексирование для ускорения запросов и обеспечения высокой производительности при работе с историей печати и логами оборудования. Кроме того, безопасность данных – неотъемлемая часть проекта, требующая установки соответствующих мер для защиты конфиденциальности и целостности информации.

Завершающим этапом является создание подробной документации, в которой описываются структура базы данных, связи между таблицами, правила целостности и другие аспекты. Все эти этапы составляют процесс проектирования базы данных, который требует внимания к деталям и ориентирован на создание системы, способной удовлетворить текущие и будущие потребности АИС студии \textit{3D}-печати.

В общем, проектирование базы данных в организации требует соблюдения ключевых принципов, чтобы обеспечить эффективное управление информацией и поддерживать высокое качество принимаемых решений на её основе [1].

\subsubsection{} Описание структуры базы данных

В данной спроектированной базе данных можно выделить следующие сущности, которые в совокупности составляют логическую схему АИС студии 3D-печати, более подробно опишем их составляющие.

Сущность «Пользователь» (\textit{UserTable}) является центральным элементом системы и хранит данные всех действующих лиц (клиентов, сотрудников, администраторов). В отличие от раздельного хранения, здесь используется единая таблица с разграничением прав доступа через атрибут роли. Перечень атрибутов:
\begin{itemize}
    \item номер пользователя: уникальный числовой код, служащий для однозначного определения пользователя в системе (Первичный ключ --- \textit{PK});
    \item \textit{email}: текстовый атрибут, выполняющий функцию логина и средства связи, должен быть уникальным в системе;
    \item пароль: текстовый атрибут, содержащий хэш пароля для обеспечения безопасности доступа;
    \item имя, фамилия: текстовые атрибуты для персонализации интерфейса и документов;
    \item номер телефона: текстовый атрибут для оперативной связи;
    \item роль: перечисляемый атрибут (\textit{role}), определяющий уровень доступа (например, \textit{CLIENT}, \textit{EMPLOYEE}, \textit{ADMIN});
    \item активность: булево значение (\textit{is\_active}), показывающее, подтвердил ли пользователь аккаунт;
    \item аккаунт \textit{Telegram}: текстовый атрибут для интеграции с мессенджером (опционально).
\end{itemize}

Сущность «Коды верификации» (\textit{EmailVerificationCodes}) служит для обеспечения безопасности и подтверждения регистрации. Связана с пользователем связью 1:M. Атрибуты:
\begin{itemize}
    \item номер кода: уникальный идентификатор записи (\textit{PK});
    \item номер пользователя: внешний ключ (\textit{FK}) к сущности «Пользователь»;
    \item код: строковое значение проверочного кода;
    \item время истечения: временной атрибут, ограничивающий срок действия кода.
\end{itemize}

Сущность «Тип пластика» (\textit{FilamentTypeTable}) содержит справочную информацию о материалах (например, PLA, PETG). Атрибуты:
\begin{itemize}
    \item номер типа: уникальный идентификатор (\textit{PK});
    \item название: уникальное текстовое наименование материала;
    \item описание: текстовое поле с характеристиками материала.
\end{itemize}

Сущность «Пластик» (\textit{FilamentTable}) представляет собой конкретные катушки материала, доступные для печати. Связана с типами пластика связью M:1. Атрибуты:
\begin{itemize}
    \item номер пластика: уникальный идентификатор (\textit{PK});
    \item номер типа: внешний ключ (\textit{FK}) к сущности «Тип пластика»;
    \item цвет: текстовое название цвета;
    \item \textit{HEX}-код цвета: строковое представление цвета для UI;
    \item цена за грамм: числовой атрибут для расчета стоимости печати;
    \item остаток: числовой атрибут, показывающий количество материала в граммах.
\end{itemize}

Сущность «Принтер» (\textit{PrinterTable}) содержит информацию об оборудовании студии. Атрибуты:
\begin{itemize}
    \item номер принтера: уникальный идентификатор (\textit{PK});
    \item название: текстовое наименование модели принтера;
    \item мультиколор: булево значение, указывающее на возможность многоцветной печати;
    \item активность: булево значение, отражающее работоспособность оборудования.
\end{itemize}

Сущность «История принтера» (\textit{PrinterHistoryTable}) служит для ведения журнала обслуживания и использования оборудования. Атрибуты:
\begin{itemize}
    \item номер записи: уникальный идентификатор (\textit{PK});
    \item номер принтера: внешний ключ (\textit{FK}) к сущности «Принтер»;
    \item номер сотрудника: внешний ключ (\textit{FK}) к сущности «Пользователь» (ответственный за действие);
    \item дата и время: временной атрибут события;
    \item комментарий: текстовое описание проведенных работ или инцидента.
\end{itemize}

Сущность «Статус заказа» (\textit{OrderStatusTable}) — справочник возможных состояний заказа. Атрибуты:
\begin{itemize}
    \item номер статуса: уникальный идентификатор (\textit{PK});
    \item описание: текстовое наименование статуса (например, «В обработке», «Готов»).
\end{itemize}

Сущность «Заказ» (\textit{OrderTable}) является ключевой транзакционной сущностью, объединяющей клиента, сотрудника и статус выполнения. Атрибуты:
\begin{itemize}
    \item номер заказа: уникальный идентификатор (\textit{PK});
    \item номер клиента: внешний ключ (\textit{FK}) к сущности «Пользователь»;
    \item номер сотрудника: внешний ключ (\textit{FK}) к сущности «Пользователь» (может быть \textit{NULL}, если заказ еще не взят в работу);
    \item номер статуса: внешний ключ (\textit{FK}) к сущности «Статус заказа»;
    \item общая стоимость: числовой атрибут, фиксирующий цену заказа;
    \item дата создания, дата завершения: временные метки жизненного цикла заказа;
    \item комментарий: примечания клиента или менеджера.
\end{itemize}

Сущность «История заказа» (\textit{OrderHistoryTable}) обеспечивает аудит изменений состояния заказа. Атрибуты:
\begin{itemize}
    \item номер записи: уникальный идентификатор (\textit{PK});
    \item номер заказа: внешний ключ (\textit{FK}) к сущности «Заказ»;
    \item номер сотрудника: внешний ключ (\textit{FK}) к сущности «Пользователь», внесшего изменения;
    \item номер статуса: внешний ключ (\textit{FK}), фиксирующий установленный статус;
    \item комментарий: описание причины изменения.
\end{itemize}

Сущность «Файлы заказа» (\textit{OrderFileTable}) хранит информацию о 3D-моделях, прикрепленных к заказу. Атрибуты:
\begin{itemize}
    \item номер файла: уникальный идентификатор (\textit{PK});
    \item номер заказа: внешний ключ (\textit{FK}) к сущности «Заказ»;
    \item загрузил: внешний ключ (\textit{FK}) к сущности «Пользователь»;
    \item имя файла, \textit{URL}: текстовые атрибуты для доступа к файлу;
    \item путь в хранилище: служебный путь в облачном хранилище (\textit{Firebase});
    \item размер, \textit{MIME}-тип: технические характеристики файла.
\end{itemize}

Для реализации связей между основными сущностями используются внешние ключи, что обеспечивает целостность данных и устранение избыточности. Более детальное описание атрибутов, взаимосвязей между сущностями и их взаимодействия представлено на логической схеме базы данных.

\subsubsection{} Логическая схема базы данных

Более детальное описание атрибутов, взаимосвязей между сущностями и их взаимодействия представлено на логической схеме базы данных, показанной на рисунке \ref{fig:logical_db_schema}.

Логическая схема включает таблицы с атрибутами, которые отражают сущности, связанные с процессом тестирования клиентов, а также промежуточные таблицы, предназначенные для связи этих сущностей. В каждой таблице указаны атрибуты, которые служат индикаторами конкретных записей и выполняют роль первичных ключей. Для связывания таблиц используются внешние ключи.